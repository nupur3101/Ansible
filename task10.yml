---
- hosts: all
  tasks:
  
  - package:
      name: docker-ce-18.06.3.ce-3.el7.x86_64
      state: present

  - name: "Enable docker services"
    service:
      name: docker
      state: started
      enabled: yes

  - copy:
      dest: "/var/www/html/task10.html"
      content: "Successfully completed ansible task 10\n"

  - docker_image:
      name: httpd
      source: pull

  - docker_container:
      name: task10
      image: httpd
      state: started
      exposed_ports: "80"
      ports: "8080:80"
      volumes: "/var/www/html/:/usr/local/apache2/htdocs/"

  - firewalld:
      port: "80/tcp"
      state: enabled
      immediate: yes 
